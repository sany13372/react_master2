"use strict";(self.webpackChunkreact_middle=self.webpackChunkreact_middle||[]).push([[622],{11:(e,a,t)=>{t.d(a,{I:()=>c});var r=t(7294),s=t(9457),l=t(4187);var n=t(5893);const c=(0,r.memo)((e=>{const{className:a,value:t="",onChange:r,type:c="text",placeholder:o,readonly:i,...d}=e,g={fTN1P:i};return(0,n.jsxs)(s.g,{gap:"4",max:!0,className:(0,l.A)("LuFDU",g,[a]),children:[(0,n.jsx)("div",{children:o}),(0,n.jsx)("input",{type:c,onChange:e=>{r?.(e.target.value)},className:"X8EVb",placeholder:o,value:t,readOnly:i,...d})]})}))},1622:(e,a,t)=>{t.r(a),t.d(a,{default:()=>ae});var r=t(7294),s=t(9887),l=t(9711),n=t(4268),c=t(4666);const o=e=>e.ArticlesPage?.isLoading||!1,i=e=>e.ArticlesPage?.error,d=e=>e.ArticlesPage?.view||c.GA.TILE,g=e=>e.ArticlesPage?.page||1,h=e=>e.ArticlesPage?.order??"asc",u=e=>e.ArticlesPage?.sort??c.$B.CREATED,v=e=>e.ArticlesPage?.search??"",m=e=>e.ArticlesPage?.type??c.Iq.ALL;const p=(0,n.hg)("articlesPage/fetchArticlesList",(async(e,a)=>{const{extra:t,rejectWithValue:r,getState:s}=a,l=s().ArticlesPage?.limit||15,n=u(s()),o=h(s()),i=v(s()),d=g(s()),p=m(s());try{A={sort:n,order:o,search:i,type:p},window.history.pushState(null,"",function(e){const a=new URLSearchParams(window.location.search);return Object.entries(e).forEach((e=>{let[t,r]=e;void 0!==r&&a.set(t,r)})),`?${a.toString()}`}(A));const e=await t.api.get("/articles",{params:{_expand:"user",_limit:l,_page:d,_sort:n,_order:o,q:i,type_like:p===c.Iq.ALL?void 0:p}});if(!e.data)throw new Error;return e.data}catch(e){return r("error")}var A}));var A=t(1283);const x=(0,n.HF)({selectId:e=>e.id}),y=x.getSelectors((e=>e.ArticlesPage||x.getInitialState())),w=(0,n.oM)({name:"articlesPageSlice",initialState:x.getInitialState({error:void 0,isLoading:!1,ids:[],entities:{},view:c.GA.TILE,hasMore:!0,page:1,limit:15,_inited:!1,order:"asc",search:"",sort:c.$B.CREATED,type:c.Iq.ALL}),reducers:{setView:(e,a)=>{e.view=a.payload,localStorage.setItem(A.fK,a.payload)},setPage:(e,a)=>{e.page=a.payload},initState:e=>{const a=localStorage.getItem(A.fK);e.view=a,e.limit=a===c.GA.LIST?4:15,e._inited=!0},setOrder:(e,a)=>{e.order=a.payload},setSort:(e,a)=>{e.sort=a.payload},setSearch:(e,a)=>{e.search=a.payload},setType:(e,a)=>{e.type=a.payload}},extraReducers:e=>{e.addCase(p.pending,((e,a)=>{e.error=void 0,e.isLoading=!0,a.meta.arg.replace&&x.removeAll(e)})).addCase(p.fulfilled,((e,a)=>{e.isLoading=!1,e.hasMore=a.payload.length>=e.limit,a.meta.arg.replace?x.setAll(e,a.payload):x.addMany(e,a.payload)})).addCase(p.rejected,((e,a)=>{e.isLoading=!1,e.error=a.payload}))}}),{actions:j,reducer:C}=w,b=(0,n.hg)("articlesPage/fetchNextArticlesPage",(async(e,a)=>{const{getState:t,dispatch:r}=a,s=t().ArticlesPage?.hasMore,l=g(t()),n=o(t());s&&!n&&(r(j.setPage(l+1)),r(p({})))})),T=(0,n.hg)("articlesPage/initArticlesPage",(async(e,a)=>{const{getState:t,dispatch:r}=a;if(!t().ArticlesPage?._inited){const a=e.get("order"),t=e.get("sort"),s=e.get("search"),l=e.get("type");a&&r(j.setOrder(a)),t&&r(j.setSort(t)),s&&r(j.setSearch(s)),l&&r(j.setType(l)),r(j.initState()),r(p({}))}}));var S=t(3942),f=t(8699),P=t(5893);const I=(0,r.memo)((e=>{const{className:a}=e,{t}=(0,s.$G)("articles"),r=(0,S.v9)(y.selectAll),l=(0,S.v9)(d),n=(0,S.v9)(o);return(0,S.v9)(i)?(0,P.jsx)(f.xv,{text:t("error load article")}):(0,P.jsx)(c.wD,{view:l,isLoading:n,articles:r,className:a})}));var L=t(9457);const N=e=>{const{className:a,label:t,options:s,onChange:l,value:n,readonly:c}=e,o=(0,r.useMemo)((()=>s?.map((e=>(0,P.jsx)("option",{className:"JkXz9",value:e.value,children:e.content},e.value)))),[s]);return(0,P.jsxs)(L.U,{gap:"8",children:[t&&(0,P.jsx)("div",{children:`${t}`}),(0,P.jsx)("select",{disabled:c,className:"VOKOu",value:n,onChange:e=>{l&&l(e.target.value)},children:o})]})},E=e=>{const{className:a,onChangeOrder:t,onChangeSort:l,order:n,sort:o}=e,{t:i}=(0,s.$G)("articles"),d=(0,r.useMemo)((()=>[{value:"asc",content:i("sort increment")},{value:"desc",content:i("sort decrement")}]),[i]),g=(0,r.useMemo)((()=>[{value:c.$B.CREATED,content:i("data create")},{value:c.$B.TITLE,content:i("name")},{value:c.$B.VIEWS,content:i("view count")}]),[i]);return(0,P.jsxs)(L.U,{gap:"8",justify:"center",children:[(0,P.jsx)(N,{options:g,label:i("Sort by"),value:o,onChange:l}),(0,P.jsx)(N,{options:d,value:n,onChange:t})]})};var k=t(4187),O=t(6425);const M={Tabs:"bXYDR"},G=(0,r.memo)((e=>{const{className:a,tabs:t,onTabClick:s,value:l}=e,n=(0,r.useCallback)((e=>()=>{s(e)}),[s]);return(0,P.jsx)(L.U,{gap:"8",className:(0,k.A)(M.Tabs,{},[a]),children:t.map((e=>(0,P.jsx)(O.Z,{theme:e.value===l?O.r.OUTLINED:O.r.NORMAL,className:M.tab,onClick:n(e),children:e.content},e.value)))})})),R=(0,r.memo)((e=>{const{className:a,value:t,onChangeType:l}=e,{t:n}=(0,s.$G)("articles"),o=(0,r.useMemo)((()=>[{value:c.Iq.ALL,content:n("All articles")},{value:c.Iq.IT,content:n("IT")},{value:c.Iq.ANALYTICS,content:n("ANALYTICS")},{value:c.Iq.MARKETING,content:n("MARKETING")}]),[n]),i=(0,r.useCallback)((e=>{l(e.value)}),[l]);return(0,P.jsx)(G,{tabs:o,value:t,onTabClick:i,className:(0,k.A)("",{},[a])})}));var $;function V(){return V=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},V.apply(this,arguments)}var _;function U(){return U=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},U.apply(this,arguments)}var Z=t(4156),q=t(7088);const D={selected:"UJ0tc"},B=[{view:c.GA.LIST,icon:e=>r.createElement("svg",V({width:24,height:24,xmlns:"http://www.w3.org/2000/svg"},e),$||($=r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.75 18a.75.75 0 0 1 .75-.75h15a.75.75 0 1 1 0 1.5h-15a.75.75 0 0 1-.75-.75Zm0-6a.75.75 0 0 1 .75-.75h15a.75.75 0 1 1 0 1.5h-15a.75.75 0 0 1-.75-.75Zm0-6a.75.75 0 0 1 .75-.75h15a.75.75 0 1 1 0 1.5h-15A.75.75 0 0 1 3.75 6Z"})))},{view:c.GA.TILE,icon:e=>r.createElement("svg",U({width:24,height:24,xmlns:"http://www.w3.org/2000/svg"},e),_||(_=r.createElement("path",{d:"M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2Zm7 9v5h5v-5h-5Zm-7 0v5h5v-5H6Zm7-7v5h5V6h-5ZM6 6v5h5V6H6Z"})))}],K=(0,r.memo)((e=>{const{className:a,view:t,onViewClick:r}=e,{t:l}=(0,s.$G)();return(0,P.jsx)(L.U,{gap:"8",children:B.map(((e,a)=>{return(0,P.jsx)(Z.zx,{theme:Z.Wu.CLEAR,onClick:(s=e.view,()=>{r?.(s)}),children:(0,P.jsx)(q.J,{Svg:e.icon,className:(0,k.A)(D.icon,{[D.selected]:e.view===t},[])})},a);var s}))})}));var H=t(9169),W=t(1554),J=t(11);const X=(0,r.memo)((e=>{const{className:a}=e,{t}=(0,s.$G)("articles"),l=(0,H.T)(),n=(0,S.v9)(d),c=(0,S.v9)(u),o=(0,S.v9)(h),i=(0,S.v9)(v),g=(0,S.v9)(m),A=(0,r.useCallback)((()=>{l(p({replace:!0}))}),[l]),x=function(e,a){const t=(0,r.useRef)();return(0,r.useCallback)((function(){for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];t.current&&clearTimeout(t.current),t.current=setTimeout((()=>{e(...r)}),500)}),[e,500])}(A),y=(0,r.useCallback)((e=>{l(j.setView(e))}),[l]),w=(0,r.useCallback)((e=>{l(j.setSort(e)),l(j.setPage(1)),A()}),[l,A]),C=(0,r.useCallback)((e=>{l(j.setOrder(e)),l(j.setPage(1)),A()}),[l,A]),b=(0,r.useCallback)((e=>{l(j.setSearch(e)),l(j.setPage(1)),x()}),[l,x]),T=(0,r.useCallback)((e=>{l(j.setType(e)),l(j.setPage(1)),A()}),[l,A]);return(0,P.jsxs)(L.g,{gap:"16",max:!0,children:[(0,P.jsxs)(L.U,{gap:"16",justify:"between",max:!0,children:[(0,P.jsx)(E,{order:o,sort:c,onChangeOrder:C,onChangeSort:w}),(0,P.jsx)(K,{view:n,onViewClick:y})]}),(0,P.jsx)(W.Z,{max:!0,children:(0,P.jsx)(J.I,{onChange:b,value:i,placeholder:t("search")})}),(0,P.jsx)(R,{value:g,onChangeType:T})]})}));var Y=t(8205),z=t(9728),F=t(3468);const Q={ArticlesPage:C},ee=e=>{const{className:a}=e,{t}=(0,s.$G)("articles"),n=(0,H.T)(),[c]=(0,l.lr)(),o=(0,r.useCallback)((()=>{n(b())}),[n]);return(0,z.Q)((()=>{n(T(c))})),(0,P.jsx)(Y.W,{reducers:Q,removeAfterUnmount:!1,children:(0,P.jsxs)(F.T,{onScrollEnd:o,className:(0,k.A)("i0h17",{},[a]),children:[t("ArticlesPage header"),(0,P.jsx)(X,{}),(0,P.jsx)(I,{})]})})},ae=(0,r.memo)(ee)}}]);
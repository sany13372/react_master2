"use strict";(self.webpackChunkreact_middle=self.webpackChunkreact_middle||[]).push([[431],{11:(e,a,s)=>{s.d(a,{I:()=>l});var r=s(7294),t=s(9457),o=s(4187);var n=s(5893);const l=(0,r.memo)((e=>{const{className:a,value:s="",onChange:r,type:l="text",placeholder:d,readonly:i,...c}=e,u={fTN1P:i};return(0,n.jsxs)(t.g,{gap:"4",max:!0,className:(0,o.A)("LuFDU",u,[a]),children:[(0,n.jsx)("div",{children:d}),(0,n.jsx)("input",{type:l,onChange:e=>{r?.(e.target.value)},className:"X8EVb",placeholder:d,value:s,readOnly:i,...c})]})}))},2431:(e,a,s)=>{s.r(a),s.d(a,{default:()=>b});var r=s(7294),t=s(9887),o=s(3942);const n=e=>e?.LoginForm?.error||"",l=e=>e?.LoginForm?.isLoading||!1,d=e=>e?.LoginForm?.password||"",i=e=>e?.LoginForm?.username||"";var c=s(4268),u=s(5321),m=s(1283);const g=(0,c.hg)("login/loginByUsername",(async(e,a)=>{const{extra:s,dispatch:r,rejectWithValue:t}=a;try{const a=await s.api.post("/login",e);if(!a.data)throw new Error("No data");return localStorage.setItem(m.z_,JSON.stringify(a.data)),r(u.EJ.setAuthData(a.data)),a.data}catch(e){return console.log(e),t("error")}})),p=(0,c.oM)({name:"login",initialState:{username:"",password:"",isLoading:!1},reducers:{setUsername:(e,a)=>{e.username=a.payload},setPassword:(e,a)=>{e.password=a.payload}},extraReducers:e=>{e.addCase(g.pending,((e,a)=>{e.error=void 0,e.isLoading=!0})).addCase(g.fulfilled,((e,a)=>{let{payload:s}=a;e.isLoading=!1})).addCase(g.rejected,((e,a)=>{e.isLoading=!1,e.error=a.payload}))}}),{actions:h}=p,{reducer:v}=p;var x=s(4187),y=s(8205),C=s(9169),N=s(4156),w=s(11),L=s(8699);const j="PQPa1";var f=s(5893);const k={LoginForm:v},b=(0,r.memo)((e=>{let{className:a,onSuccess:s}=e;const{t:c}=(0,t.$G)(),u=(0,C.T)(),m=(0,o.v9)(i),p=(0,o.v9)(d),v=(0,o.v9)(l),b=(0,o.v9)(n),F=(0,r.useCallback)((e=>{u(h.setUsername(e))}),[u]),E=(0,r.useCallback)((e=>{u(h.setPassword(e))}),[u]),I=(0,r.useCallback)((async()=>{"fulfilled"===(await u(g({username:m,password:p}))).meta.requestStatus&&s()}),[u,m,p,s]);return(0,f.jsx)(y.W,{reducers:k,children:(0,f.jsxs)("div",{className:(0,x.A)("xYNEf",{},[a]),children:[(0,f.jsx)(L.xv,{title:c("LoginForm")}),b&&(0,f.jsx)(L.xv,{text:c("errorForm"),theme:L.lg.ERROR}),(0,f.jsx)(w.I,{className:j,placeholder:c("Input name"),onChange:F,value:m}),(0,f.jsx)(w.I,{className:j,placeholder:c("Input password"),onChange:E,value:p}),(0,f.jsx)(N.zx,{type:"submit",theme:N.Wu.BACKGROUND_INVERTED,className:"Ok_5a",onClick:I,disabled:v,children:c("Login")})]})})}))}}]);